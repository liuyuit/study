# mysql 索引失效的几种情况

## 字段区分度不够

比如说性别字段就只可能有三个值，男、女、未知，mysql的查询优化器觉得走索引还不如全表快

## 数据量太小

这种情况下，mysql的查询优化器觉得没必要走索引

## 联合索引不符合最左前缀原则

sql语句中where子语句中各个字段的顺序也要符合联合索引的顺序。

所以在建立联合索引的时候需要考虑到业务的需求，将查询最频繁的字段设置到左边。

## 一张表只能用单个索引

可以用join来使用多个索引。

## 字段类型不对

在b-tree模式下,如果查询的where里的值是int类型,但这个字段在数据库里存的的是varchar类型字段，无法利用到索引。