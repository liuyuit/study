# Git Reset 简介

## reference links

>  [https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E7%BD%AE%E6%8F%AD%E5%AF%86#r_git_reset](https://git-scm.com/book/zh/v2/Git-工具-重置揭密#r_git_reset) 

 

## Git的三棵树

1.1.   HEAD

HEAD是当前分支引用的指针，它总是指向当前分支的最后一次提交，这表示HEAD是下一次提交，HEAD指向当前分支，而当前分支会指向最后一次提交

1.2.   索引

是预期的下一次提交，也叫做“暂存区域”，也就是运行 git commit时Git看起来的样子。

Git会将上一次检出到工作目录的所有文件填充到索引区，之后会将其中一些文件替换为新版本，接着通过 git commit 转换为树用来做新的提交。

1.3.   工作目录

最后，你就有了自己的工作目录。 另外两棵树以一种高效但并不直观的方式，将它们的内容存储在 .git 文件夹中。 工作目录会将它们解包为实际的文件以便编辑。 你可以把工作目录当做 沙盒。在你将修改提交到暂存区并记录到历史之前，可以随意更改。

1.4.   工作流程

1.4.1.  git init

运行 git init，这会创建一个 Git 仓库，其中的 HEAD 引用指向未创建的分支（master 还不存在）。

1.4.2.  git add

如果想要提交某个文件，所以用 git add 来获取工作目录中的内容，并将其复制到索引中。

1.4.3.  git commit

接着运行 git commit，它会取得索引中的内容并将它保存为一个永久的快照，然后创建一个指向该快照的提交对象，最后更新 master 来指向本次提交。

切换分支或克隆的过程也类似。 当检出一个分支时，它会修改 HEAD 指向新的分支引用，将索引填充为该次提交的快照，然后将索引的内容复制到工作目录中。

## 重置的作用

2.1.   移动HEAD

reset 做的第一件事是移动 HEAD 的指向，HEAD任然会指向当前分支，但当前分支会移动指向的提交对象，例如如果指向meter分支，运行 git reset 9e5e64a 将会使 master 指向 9e5e64a。

2.2.   更新索引

接下来，reset 会用 HEAD 指向的当前快照的内容来更新索引。这样，我们回滚到了git add 和git commit 之前。

2.3.   更新工作目录

reset 要做的的第三件事情就是让工作目录看起来像索引。 如果使用 --hard 选项，它将会继续这一步。

2.4.    